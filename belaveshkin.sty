\RequirePackage{fontspec}
\RequirePackage{enumitem}
\RequirePackage{graphicx}
\RequirePackage{indentfirst}
\RequirePackage{hyperref}
\RequirePackage{eso-pic}
\RequirePackage{needspace}
\RequirePackage{awesomebox}
\RequirePackage{setspace}
\RequirePackage[xindy]{imakeidx}
\RequirePackage[version=4,arrows=pgf-filled,textfontname=sffamily,mathfontname=mathsf]{mhchem}
\defaultfontfeatures{Ligatures={TeX}}
\RequirePackage[english,belarusian]{babel}
\hypersetup{
    colorlinks=true, % make the links colored
    linkcolor=black, % color TOC links in black
    urlcolor=red, % color URLs in red
    linktoc=all, % 'all' will create links for everything in the TOC
    % pdftitle={Што і калі есьці.},
}
\makeindex[program=texindy, options=-M belaveshkin.xdy -L belarusian -C utf8]

%%%%%  FONTS  %%%%%
\setmainfont[
  Path=\string./fonts/,
  ItalicFont=SourceSerif4-Italic.ttf,%
  BoldItalicFont=SourceSerif4-SemiboldIt.ttf,%
  BoldFont=SourceSerif4-Semibold.ttf,%
]{SourceSerif4-Regular.ttf}
\setsansfont[
  Path=\string./fonts/,
]{SourceSans3-Regular.ttf}
\newfontfamily\TitlePageHuge[
  Path=\string./fonts/,
  SizeFeatures={Size=40},
]{SourceSerif4_36pt-Medium.ttf}

%%%%%  PAGE DIMENTIONS  %%%%%
\marginparwidth = 0 mm
\oddsidemargin = 0 mm
\marginparsep = 0 mm
\marginparpush = 0 mm
\oddsidemargin = 0.15 in
\evensidemargin = 0.15 in
\topmargin=-8mm
\hoffset=-10 mm
\headsep=5mm
\setlength{\headheight}{14pt}

%%%%%  TYPOGRAPHICS  %%%%%
\tolerance=3000
\hbadness=4000
\emergencystretch 0.5em

\raggedbottom
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000

\spaceskip 4pt plus 2pt minus 1pt

%%%%%  HEADING  %%%%%
\makeevenhead{headings}{\thepage}{}{\small\leftmark}
\makeoddhead{headings}{\small\rightmark}{}{\thepage}
% \nouppercaseheads

%%%%%  COVER PAGE  %%%%%
\newcommand{\CoverPic}[1]{%
\begin{titlingpage}
  \AddToShipoutPicture*{
    \put(0,0){%
      \parbox[b][\paperheight]{\paperwidth}{%
        \vfill%
        \hspace{10.00mm}%
        \includegraphics[height=\paperheight,keepaspectratio,clip]{#1}%
        \vfill%
      }%
    }%
  }
\end{titlingpage}
~
\pagestyle{empty}}

%%%%  TITLE PAGE  %%%%%
\newcommand{\TitlePageFormat}[4]{
  \begin{center}
    \vspace{1cm}
    {\HUGE #1}
  \end{center}
  \vspace{2cm}
  \begin{center}    
    {\TitlePageHuge 
    #2}\\[2em]
      \rule{0.70\textwidth}{1pt} \\[2em]
      {\Huge #3}
  \end{center}
  \vspace{9cm}
  \begin{center}
    #4
  \end{center}  
}

%%%% PART PAGE %%%%%
\renewcommand{\part}[1]{
  \clearpage
  \addcontentsline{toc}{part}{#1}
  \thispagestyle{empty}
  \begin{vplace}
    \begin{center}
      \spaceskip 12pt plus 2pt minus 1pt
      \begin{Spacing}{6.0}
      {\TitlePageHuge #1}
      \end{Spacing}
    \end{center}
  \end{vplace}
}
\renewcommand{\partpageend}{
  \spaceskip 4pt plus 2pt minus 1pt
  \afterpartskip
}

%%%%%  CHAPTER PAGE  %%%%%
\makechapterstyle{belaveshkin}{%
  \setlength{\afterchapskip}{30pt}
  \renewcommand*{\chapterheadstart}{\vspace*{-20pt}}
  \renewcommand*{\afterchapternum}{\par\nobreak\vskip 25pt}
  \renewcommand*{\chapnamefont}{\normalfont\LARGE\flushright}
  \renewcommand*{\chapnumfont}{\normalfont\HUGE}
  \renewcommand*{\chaptitlefont}{\normalfont\HUGE\bfseries\flushright}
  \renewcommand*{\printchaptername}{%
  }
  \renewcommand*{\chapternamenum}{}
  \setlength{\beforechapskip}{18mm}
  \setlength{\midchapskip}{\paperwidth}
  \addtolength{\midchapskip}{-\textwidth}
  \addtolength{\midchapskip}{-\spinemargin}
  \addtolength{\midchapskip}{1cm}
  \renewcommand*{\printchapternum}{%
    \flushright\makebox[0pt][r]{%
      \normalfont\LARGE\MakeUppercase{\@chapapp}%
      \resizebox{!}{18mm}{\chapnumfont \thechapter }%
      % \hspace{.8em}%
      % \rule{\midchapskip}{\beforechapskip}\hspace{-\midchapskip}%
    }}%
  \makeoddfoot{plain}{}{\thepage}{}%
  \makeevenfoot{plain}{}{\thepage}{}%
}
\chapterstyle{belaveshkin}

%%%%%  SECTION HEADING  %%%%%
\setsecnumdepth{section}
\renewcommand*{\thesection}{\arabic{section}}
\setsecnumformat{\csname the#1\endcsname.~~}

\renewcommand*{\subsectionmark}[1]{\markright{\MakeUppercase{#1}}}

%%%%%  PARAGRAPH  %%%%%

\setparaheadstyle{\indent\normalfont\normalsize\bfseries}
\setbeforeparaskip{0pt}%

%%%%%  TIPBOX  %%%%%
\setlength{\aweboxvskip}{3mm}
\setlength{\aweboxleftmargin}{0.025\linewidth}
\renewcommand{\tipbox}[1]{\awesomebox[gray]{0pt}{\faLightbulb}{gray}{\emph{#1}}}

%%%%%  INFOBOX  %%%%%
\newcommand{\infobox}[1]{\awesomebox[gray]{0pt}{\faExclamation}{gray}{\textbf{#1}}}

%%%%%  LISTS  %%%%%
\setlist[enumerate]{itemindent=3em,labelwidth=1.5em,leftmargin=0pt,nosep}
\setlist[itemize]{itemindent=3em,labelwidth=1.5em,leftmargin=0pt,nosep}

%%%%%  CONTENT PAGE  %%%%%
\setpnumwidth{2em}
% Part
\cftpagenumbersoff{part}
\setlength{\cftbeforepartskip}{10pt \@plus\p@}
% Chapter
\renewcommand*{\cftchapterfont}{\normalfont}
\renewcommand*{\cftchapterpagefont}{\normalfont}
\renewcommand*{\cftchapteraftersnum}{.}
\setlength{\cftchapternumwidth}{1.75em}
\renewcommand*{\cftchapterleader}{\cftchapterfont\cftdotfill{\cftchapterdotsep}}
\renewcommand*{\cftchapterdotsep}{\cftdotsep}
\setlength{\cftbeforechapterskip}{0em \@plus\p@}
% Section
\renewcommand{\cftsectionaftersnum}{.}
\cftsetindents{section}{2em}{1.75em}

%%%%%  TARASHKEVICA  %%%%%
\addto\captionsbelarusian{\renewcommand{\contentsname}{Зьмест}}
